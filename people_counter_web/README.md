# People Counter Web Application

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –ª—é–¥–µ–π –≤ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º YOLOv8 –∏ ROI (Region of Interest).

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–î–µ—Ç–µ–∫—Ü–∏—è –ª—é–¥–µ–π** —Å –ø–æ–º–æ—â—å—é YOLOv8m
- **ROI (Region of Interest)** - –∞–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- **–ú—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥** –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π imgsz** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ –≤—Ö–æ–¥–∞ –ø–æ–¥ ROI
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–∞–º–µ—Ä** - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ RTSP –∫–∞–º–µ—Ä–∞–º (Axis)
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–∏–¥–µ–æ** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ MP4 —Ñ–∞–π–ª–æ–≤
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose
- MP4 –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã (–¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

## üõ† –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
git clone <repository-url>
cd people_counter_web
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ:**
```bash
docker-compose up --build
```

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:**
```
http://localhost:8080
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–∞–º–µ—Ä–µ

1. –í—ã–±–µ—Ä–∏—Ç–µ "–ö–∞–º–µ—Ä–∞ (RTSP)"
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã:
   - **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - **–ü–∞—Ä–æ–ª—å** - –ø–∞—Ä–æ–ª—å
   - **Host** - IP –∞–¥—Ä–µ—Å –∫–∞–º–µ—Ä—ã
3. –ù–∞–∂–º–∏—Ç–µ "–°—Ç–∞—Ä—Ç"

### –†–∞–±–æ—Ç–∞ —Å –≤–∏–¥–µ–æ —Ñ–∞–π–ª–∞–º–∏

1. **–í—ã–±–µ—Ä–∏—Ç–µ "–í–∏–¥–µ–æ —Ñ–∞–π–ª"**
2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ:**
   - –ù–∞–∂–º–∏—Ç–µ "–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª" –∏ –≤—ã–±–µ—Ä–∏—Ç–µ MP4
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–≥—Ä—É–∑–∏—Ç—å"
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∞–Ω–∞–ª–∏–∑:**
   - –í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥–µ–æ –∏–∑ —Å–ø–∏—Å–∫–∞
   - –ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤–∏–¥–µ–æ"
   - –ù–∞–∂–º–∏—Ç–µ "–°—Ç–∞—Ä—Ç"

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ROI

1. **–ù–∞—Ä–∏—Å—É–π—Ç–µ –æ–±–ª–∞—Å—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–∞:**
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–µ–∫
   - –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–π—Ç–µ —Ç–æ—á–∫–∏ –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ñ–æ—Ä–º—ã
   - –î–æ–±–∞–≤—å—Ç–µ —Ç–æ—á–∫–∏ –º–µ–∂–¥—É —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ (–∫–ª–∏–∫ –Ω–∞ –ª–∏–Ω–∏–∏)
2. **–°–±—Ä–æ—Å–∏—Ç—å ROI:** –Ω–∞–∂–º–∏—Ç–µ "–°–±—Ä–æ—Å–∏—Ç—å ROI"

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è:
- **–°—Ç–∞—Ç—É—Å** –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- **FPS** - –∫–∞–¥—Ä–æ–≤ –≤ —Å–µ–∫—É–Ω–¥—É
- **–†–∞–∑–º–µ—Ä** –∫–∞–¥—Ä–∞
- **CPU** –∏ **MEM** - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
- **Crop** - —Ä–∞–∑–º–µ—Ä ROI (—à–∏—Ä–∏–Ω–∞ √ó –≤—ã—Å–æ—Ç–∞)
- **imgsz** - —Ä–∞–∑–º–µ—Ä –≤—Ö–æ–¥–∞ –¥–ª—è YOLO

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

- **Backend** (Python/FastAPI) - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ –∏ –¥–µ—Ç–µ–∫—Ü–∏—è
- **Frontend** (HTML/JS) - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **YOLOv8m** - –º–æ–¥–µ–ª—å –¥–µ—Ç–µ–∫—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- **FFmpeg** - –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤–∏–¥–µ–æ –≤ RTSP –ø–æ—Ç–æ–∫

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

- **–ú—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥** - 4 worker –ø—Ä–æ—Ü–µ—Å—Å–∞
- **ROI –∫—Ä–æ–ø** - –∞–Ω–∞–ª–∏–∑ —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏
- **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π imgsz** - –ø–æ–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–¥ —Ä–∞–∑–º–µ—Ä ROI
- **–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–µ—Ç–µ–∫—Ü–∏–π** - –ø–æ confidence –∏ —Ä–∞–∑–º–µ—Ä—É bbox

### –§–æ—Ä–º–∞—Ç—ã –≤–∏–¥–µ–æ

- **–í—Ö–æ–¥:** MP4 —Ñ–∞–π–ª—ã
- **–û–±—Ä–∞–±–æ—Ç–∫–∞:** 1280√ó960, 10 FPS
- **–í—ã—Ö–æ–¥:** RTSP –ø–æ—Ç–æ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
people_counter_web/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ detector.py      # –î–µ—Ç–µ–∫—Ü–∏—è –ª—é–¥–µ–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py          # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ video_stream.py  # –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ static/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app.js           # JavaScript –ª–æ–≥–∏–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.html       # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css        # –°—Ç–∏–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ videos/                  # –ü–∞–ø–∫–∞ –¥–ª—è –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ data/                    # –ü–∞–ø–∫–∞ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö (ROI)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ README.md
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ù–∏–∑–∫–∏–π FPS
- –£–º–µ–Ω—å—à–∏—Ç–µ ROI –æ–±–ª–∞—Å—Ç—å
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É CPU
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ROI –Ω–µ —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π

### –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–º–µ—Ä—ã
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–∞–º–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å–µ—Ç–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞

### –ü—Ä–æ–±–ª–µ–º—ã —Å –≤–∏–¥–µ–æ
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ MP4
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è < 100MB)
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## üìù –õ–æ–≥–∏

–õ–æ–≥–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ backend:
```bash
docker-compose logs backend
```

–ö–ª—é—á–µ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è:
- `[YOLO_LOGIC]` - –ª–æ–≥–∏–∫–∞ –≤—ã–±–æ—Ä–∞ imgsz
- `[DETECT]` - –¥–µ—Ç–µ–∫—Ü–∏–∏ –æ–±—ä–µ–∫—Ç–æ–≤
- `[CROP]` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ ROI
- `[MP_QUEUE]` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ—á–µ—Ä–µ–¥–µ–π –º—É–ª—å—Ç–∏–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥–∞ 